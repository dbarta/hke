<div class="container mx-auto my-8" style="direction: rtl;">
  <div class="flex items-center mb-8">
    <h4 class="h4 mr-10">
      <span id="communities_count"><%= @communities.count %></span>
      <%= " #{t('admin.communities.index.title')}" %>
    </h4>
    <div class="ml-auto flex items-center">
      <%= link_to t('admin.communities.index.create_new'), new_admin_community_path, class: "btn btn-small btn-primary ml-10" %>
    </div>
  </div>

  <div id="search_results">
    <div class="bg-white shadow rounded-lg overflow-hidden">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              שם הקהילה
            </th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              סוג
            </th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              חשבון
            </th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              נוצר
            </th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              פעולות
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @communities.each do |community| %>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">
                  <%= link_to community.name, admin_community_path(community), class: 'text-indigo-600 hover:text-indigo-900' %>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                  <%= community.community_type&.humanize || 'N/A' %>
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= community.account&.name || 'N/A' %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                <%= time_ago_in_words(community.created_at) %> ago
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                <%= link_to 'צפייה', admin_community_path(community), class: 'text-indigo-600 hover:text-indigo-900' %>
                <%= link_to 'עריכה', edit_admin_community_path(community), class: 'text-yellow-600 hover:text-yellow-900' %>
                <%= link_to 'מחיקה', admin_community_path(community), method: :delete,
                            confirm: 'האם אתה בטוח? פעולה זו תמחק את כל נתוני הקהילה.',
                            class: 'text-red-600 hover:text-red-900' %>
              </td>
            </tr>
          <% end %>
          <% if @communities.empty? %>
            <tr>
              <td colspan="5" class="px-6 py-4 text-center text-gray-500">
                לא נמצאו קהילות. <%= link_to 'צור את הקהילה הראשונה', new_admin_community_path, class: 'text-indigo-600 hover:text-indigo-900' %>.
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-6 text-sm text-gray-600">
    <p>סה״כ קהילות: <%= @communities.count %></p>
  </div>
</div>
